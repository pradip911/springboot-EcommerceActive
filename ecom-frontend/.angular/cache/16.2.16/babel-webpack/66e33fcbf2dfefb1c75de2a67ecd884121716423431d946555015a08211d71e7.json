{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let OrderUpdateComponent = class OrderUpdateComponent {\n  constructor(productService, sanitizer, activatedRoute) {\n    this.productService = productService;\n    this.sanitizer = sanitizer;\n    this.activatedRoute = activatedRoute;\n    this.isNewProduct = true;\n    this.product = {\n      productId: null,\n      productName: \"\",\n      productDescription: \"\",\n      productDiscountedPrice: 0,\n      productActualPrice: 0,\n      productImages: []\n    };\n  }\n  ngOnInit() {\n    this.product = this.activatedRoute.snapshot.data['product'];\n    if (this.product && this.product.productId) {\n      this.isNewProduct = false;\n    }\n  }\n  addProduct(productForm) {\n    const productFormData = this.prepareFormData(this.product);\n    this.productService.addProduct(productFormData).subscribe(response => {\n      productForm.reset();\n      this.product.productImages = [];\n    }, error => {\n      console.log(error);\n    });\n  }\n  prepareFormData(product) {\n    const formData = new FormData();\n    formData.append('product', new Blob([JSON.stringify(product)], {\n      type: 'application/json'\n    }));\n    for (var i = 0; i < product.productImages.length; i++) {\n      formData.append('imageFile', product.productImages[i].file, product.productImages[i].file.name);\n    }\n    return formData;\n  }\n  onFileSelected(event) {\n    if (event.target.files) {\n      const file = event.target.files[0];\n      const fileHandel = {\n        file: file,\n        url: this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(file))\n      };\n      this.product.productImages.push(fileHandel);\n    }\n  }\n  removeImages(i) {\n    this.product.productImages.splice(i, 1);\n  }\n  fileDropped(fileHandel) {\n    this.product.productImages.push(fileHandel);\n  }\n};\nOrderUpdateComponent = __decorate([Component({\n  selector: 'app-order-update',\n  templateUrl: './order-update.component.html',\n  styleUrls: ['./order-update.component.css']\n})], OrderUpdateComponent);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}